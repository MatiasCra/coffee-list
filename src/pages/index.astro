---
import Layout from "../layouts/Layout.astro";
import Content from "../components/Content.jsx";
import { Image, getImage } from "astro:assets";
import { getCoffees } from "../data/coffee";

const coffeeOptimizedImage = async (image) => {
    return await getImage({
        src: image,
        format: "webp",
        width: image.width,
        height: image.height,
    });
};

const allCoffees = getCoffees().map((coffee) => {
    return {
        optimizedImage: coffeeOptimizedImage(coffee.image),
        ...coffee,
    };
});
---

<Layout>
    <div class="text-center max-w-xl mx-auto relative">
        <svg
            class="absolute -top-10 -right-12 w-28 h-28 text-gray-500/10 dark:text-gray-400/10 hidden md:block"
            fill="none"
            viewBox="0 0 100 100"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                d="M50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50"
                stroke="currentColor"
                stroke-width="2"></path>
            <path
                d="M50 80C66.5685 80 80 66.5685 80 50C80 33.4315 66.5685 20 50 20C33.4315 20 20 33.4315 20 50"
                stroke="currentColor"
                stroke-width="2"></path>
        </svg>
        <h1 class="text-3xl font-bold text-gray-100 dark:text-white">
            Our Collection
        </h1>
        <p class="mt-3 text-sm text-gray-300 dark:text-gray-400">
            Introducing our Coffee Collection, a selection of unique coffees
            from different roast types and origins, expertly roasted in small
            batches and shipped fresh weekly.
        </p>
    </div>
    <Content client:load allCoffees={allCoffees} />
</Layout>
